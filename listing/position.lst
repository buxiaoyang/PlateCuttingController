C51 COMPILER V7.50   POSITION                                                              05/08/2014 20:40:17 PAGE 1   


C51 COMPILER V7.50, COMPILATION OF MODULE POSITION
OBJECT MODULE PLACED IN .\output\position.obj
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE source\position.c LARGE BROWSE INCDIR(.\include\) DEBUG OBJECTEXTEND PRINT(
                    -.\listing\position.lst) OBJECT(.\output\position.obj)

line level    source

   1          #include <reg52.h>
   2          #include <position.h>
   3          #include <parameter.h>
   4          #include <basefunc.h>
   5          
   6          sbit sensorPositon = P3^4; //机械臂定位传感器
   7          
   8          uchar sensorPosiCheck = 0; //机械臂A位置检测标志位 
   9                                                                  //0：没有感应器没有低电位状态
  10                                                                  //1：检测到低电位进入延迟状态
  11                                                                  //2：等待低电位释放进入延时
  12                                                                  //3：检测低电位确实释放
  13          
  14          void maniPosition(void) //机械臂定位
  15          {
  16   1              //机械臂A位置检测
  17   1              if(sensorPosiCheck==0)
  18   1              {
  19   2                      if(sensorPositon == 0)
  20   2                      {
  21   3                              sensorPosiCheck = 1;
  22   3                      }
  23   2              }
  24   1              else if(sensorPosiCheck==1)
  25   1              {
  26   2                      if(sensorPositon == 0)
  27   2                      {
  28   3                              if(drivingDirect == DGoOutfall)
  29   3                              {
  30   4                                      //向右机械臂位置加一
  31   4                                      manipulator.currentPosition++;
  32   4                                      displayFlag = 1;
  33   4                                      if(manipulator.currentPosition>14)
  34   4                                      {
  35   5                                              manipulator.currentPosition = 14;
  36   5                                      }
  37   4                              }
  38   3                              else if (drivingDirect == DGoEntrance)
  39   3                              {
  40   4                                      //向右机械臂位置减一
  41   4                                      manipulator.currentPosition--;
  42   4                                      displayFlag = 1;
  43   4                                      if(manipulator.currentPosition>200)
  44   4                                      {
  45   5                                              manipulator.currentPosition = 0;
  46   5                                      }       
  47   4                              }
  48   3                              sensorPosiCheck = 2;
  49   3                      }
  50   2                      else
  51   2                      {
  52   3                              //干扰信号直接释放
  53   3                              sensorPosiCheck = 0;
  54   3                      }
C51 COMPILER V7.50   POSITION                                                              05/08/2014 20:40:17 PAGE 2   

  55   2              }
  56   1              else if(sensorPosiCheck==2)
  57   1              {
  58   2                      if(sensorPositon == 1)
  59   2                      {
  60   3                              sensorPosiCheck = 3;
  61   3                      }       
  62   2              }
  63   1              else
  64   1              {
  65   2                      if(sensorPositon == 1)
  66   2                      {
  67   3                              if(drivingDirect == DGoOutfall)
  68   3                              {
  69   4                                      //向右机械臂位置加一
  70   4                                      manipulator.currentPosition++;
  71   4                                      displayFlag = 1;
  72   4                                      if(manipulator.currentPosition>14)
  73   4                                      {
  74   5                                              manipulator.currentPosition = 14;
  75   5                                      }
  76   4                              }
  77   3                              else if (drivingDirect == DGoEntrance)
  78   3                              {
  79   4                                      //向右机械臂位置减一
  80   4                                      manipulator.currentPosition--;
  81   4                                      displayFlag = 1;
  82   4                                      if(manipulator.currentPosition>200)
  83   4                                      {
  84   5                                              manipulator.currentPosition = 0;
  85   5                                      }       
  86   4                              }
  87   3                              sensorPosiCheck = 0;
  88   3                      }
  89   2              }
  90   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    178    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =      1    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
